
<div class="container-fluid px-3">
  <div class="row">
    <div class="col-12 mt-3">
      <div class="bg-white rounded shadow-sm p-3">
        <h5 class="fw-bold mb-0">Leave Management</h5>
      </div>
    </div>

    <div class="container my-4">
      <div class="row">
      
        <div class="col-12 col-lg-9 mb-4">
          <div class="card shadow custom-card p-4">
            <div class="d-flex align-items-center mb-3 flex-wrap">
              <h5 
                class="fw-bold mb-0 me-4 cursor-pointer"
                [ngStyle]="{ color: selectedTab === 'status' ? '#009688' : '#000' }"
                (click)="selectTab('status')">Leave Status</h5>

              <h5 
                class="fw-bold mb-0 cursor-pointer"
                [ngStyle]="{ color: selectedTab === 'apply' ? '#009688' : '#000' }"
                (click)="selectTab('apply')">Apply Leave</h5>
            </div>

            <hr>

           
            <div *ngIf="leaveData.length > 0" class="d-none d-md-flex fw-bold text-white px-2 py-2" style="background-color: #009688;">
              <div class="col">Sr No</div>
              <div class="col">Apply Date</div>
              <div class="col">EL</div>
              <div class="col">Leave Type</div>
              <div class="col">Start Date</div>
              <div class="col">End Date</div>
              <div class="col">Paid</div>
              <div class="col">Unpaid</div>
              <div class="col">Total Days</div>
              <div class="col">Reason</div>
              <div class="col">Status</div>
              <div class="col">Action</div>
            </div>

         
            <div *ngIf="leaveData.length > 0">
              <div *ngFor="let leave of leaveData; let i = index"
                class="d-flex flex-wrap border-bottom px-2 py-2 align-items-center"
                [ngStyle]="{ 'background-color': i % 2 === 0 ? '#E5F4F3' : '#ffffff' }">
                <div class="col">{{ i + 1 }}</div>
                <div class="col">{{ leave.applyDate }}</div>
                <div class="col">{{ leave.el || '-' }}</div>
                <div class="col">{{ leave.leaveType }}</div>
                <div class="col">{{ leave.startDate }}</div>
                <div class="col">{{ leave.endDate }}</div>
                <div class="col">{{ leave.paid || '-' }}</div>
                <div class="col">{{ leave.unpaid || '-' }}</div>
                <div class="col">{{ leave.totalDays || '-' }}</div>
                <div class="col">{{ leave.reason }}</div>
                <div class="col">{{ leave.status }}</div>
                <div class="col d-flex gap-2">
                  <img src="eye-solid.png" width="20" height="20" alt="View" style="cursor: pointer;" (click)="viewLeave(leave)" />
                  <img src="view.png" width="20" height="20" alt="Delete" style="cursor: pointer;" (click)="openDeletePopup(leave)" />
                </div>
              </div>
            </div>

            <div *ngIf="leaveData.length === 0" class="text-muted text-center py-3">
              No leave applications found.
            </div>
          </div>
        </div>

   
<div class="col-12 col-lg-3 mb-4">
  <div class="card shadow-sm h-100 rounded-4 overflow-hidden">
    <div class="card-body p-3">
      <h5 class="fw-bold text-center">
        Available Leaves for the Year
      </h5>

      <table class="table mb-0" style="table-layout: fixed; width: 100%; font-size: 14px;">
        <!-- âœ… Column Widths -->
        <colgroup>
          <col style="width: 40%;">
          <col style="width: 18%;">
          <col style="width: 17%;">
          <col style="width: 25%;">
        </colgroup>

        <thead>
          <tr style="background-color: #009688; color: white; white-space: nowrap; font-weight: 600;">
            <th style="background-color: #009688; color: white; white-space: nowrap; font-weight: 600;" class="text-center">Leave Type</th>
            <th  style="background-color: #009688; color: white; white-space: nowrap; font-weight: 600;" class="text-center">Taken</th>
            <th  style="background-color: #009688; color: white; white-space: nowrap; font-weight: 600; font-size: 11px;" class="text-center">Available</th> <!-- ðŸ‘ˆ Smaller text -->
            <th style="background-color: #009688; color: white; white-space: nowrap; font-weight: 600;" class="text-center">Total</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let employee of employeeleave; let i = index">
            <td class="text-center"
                style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                [ngStyle]="{ 'background-color': i % 2 ===1 ? '#ffffff' : '#E5F4F3' }">
              {{ employee.leaveType === 'Comp Off' ? 'Comp Off ' : employee.leaveType }}
            </td>
            <td class="text-center"
                style="white-space: nowrap;"
                [ngStyle]="{ 'background-color': i % 2 === 1 ? '#ffffff' : '#E5F4F3' }">
              {{ employee.Taken }}
            </td>
            <td class="text-center"
                style="white-space: nowrap;"
                [ngStyle]="{ 'background-color': i % 2 === 1 ? '#ffffff' : '#E5F4F3' }">
              {{ employee.Available }}
            </td>
            <td class="text-center fw-bold"
                style="white-space: nowrap;"
                [ngStyle]="{ 'background-color': i % 2 === 1 ? '#ffffff' : '#E5F4F3' }">
              {{ employee.Total }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

      </div>
    </div>
  </div>
</div>


<div *ngIf="popupVisible" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center" 
     style="background-color: rgba(0, 0, 0, 0.5); z-index: 1050;">
  <div class="bg-white rounded" style="width: 90%; max-width: 480px;">

    
    <div class="d-flex justify-content-between align-items-center" style="background-color: #009688; padding: 1.2rem;">
      <h4 class="text-white mb-0 fw-bold" style="font-size: 24px;">Leave Cancellation</h4>
      <img 
        src="view.png" 
        alt="Close" 
        (click)="closePopup()" 
        style="width: 20px; height: 20px; cursor: pointer;"
      />
    </div>

    <div class="p-4 pt-3 pb-4">
      <p class="fw-semibold" style="font-size: 16px;">
        Are you sure you want to cancel your leave request from 
        <strong>{{ leaveToDelete?.startDate }}</strong> to 
        <strong>{{ leaveToDelete?.endDate }}</strong>?
      </p>
      <p class="text-muted mb-4" style="font-size: 14px;">
        This action cannot be undone once the leave is cancelled.
      </p>

      
      <div class="d-flex justify-content-end gap-2">
        <button class="btn px-4 py-2 text-white" style="background-color: #6c757d;" (click)="closePopup()">
          No, Go Back
        </button>
        <button class="btn px-4 py-2 text-white" style="background-color: #009688;" (click)="confirmDeleteLeave()">
          Yes, Cancel Leave
        </button>
      </div>
    </div>
  </div>
</div>



<div *ngIf="viewPopupVisible"
     class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center"
     style="background-color: rgba(0, 0, 0, 0.5); z-index: 1060;">
  <div class="bg-white rounded-2 shadow"
       style="width: 540px; height: 664px; overflow: hidden; display: flex; flex-direction: column;">

  
    <div class="d-flex justify-content-between align-items-center px-4 py-3"
         style="background-color: #009688;">
      <h5 class="text-white fw-bold mb-0">View Leave</h5>
      <button (click)="closeViewPopup()"
              class="btn p-0"
              style="width: 28px; height: 28px; border-radius: 50%; background-color: red; color: white; font-size: 18px; line-height: 1;">
        Ã—
      </button>
    </div>

   
    <div class="px-4 pt-4 pb-3" style="flex: 1; overflow: hidden;">

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">Apply Date</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.applyDate" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">Leave Type</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.leaveType" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">Start Date</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.startDate" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">End Date</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.endDate" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">No. of Days</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.totalDays" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">Reason</label>
        <input class="form-control flex-grow-1" [value]="selectedLeave?.reason" disabled>
      </div>

      <div class="mb-3 d-flex align-items-center">
        <label class="form-label fw-bold me-3 mb-0" style="width: 130px;">Status</label>
        <span class="badge rounded-pill px-3 py-2 fw-medium text-dark" style="background-color: orange;">
          {{ selectedLeave?.status }}
        </span>
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Manager Comments</label>
        <textarea class="form-control" rows="2" placeholder="Manager Comments" disabled></textarea>
      </div>

      <div>
        <label class="form-label fw-bold">Reviewer Comments</label>
        <textarea class="form-control" rows="2" placeholder="Reviewer Comments" disabled></textarea>
      </div>

    </div>
  </div>
</div>







